<!DOCTYPE html>
<html>
<head>
  <title>Client Progress Dashboard</title>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link href="/static/css/output.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="bg-white p-10 rounded-lg shadow-lg w-full max-w-3xl">

    <!-- ‚úÖ Header -->
    <div class="text-center mb-6">
      <img src="{{ url_for('static', filename='images/portofpower_logo.webp') }}" 
           style="width:50px;height:50px;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.2);margin:auto;">

      <h1 class="text-3xl font-bold text-blue-600 mb-2 text-center">Client Progress Dashboard</h1>

      <!-- ‚úÖ Clean Strength|Cardio Tabs (Cardio active) -->
      <div class="text-center mb-4" style="font-size:1.2rem;">
        <a href="{{ url_for('progress') }}" style="color:#5dade2;text-decoration:none;">Strength</a>
        <span style="color:#ccc;margin:0 8px;">|</span>
        <span style="color:#0074D9;font-weight:bold;border-bottom:2px solid #0074D9;padding-bottom:2px;">Cardio</span>
      </div>

      <!-- ‚úÖ Back + Logout -->
      <div class="flex flex-col items-center space-y-1 text-sm mt-2">
        <a href="{{ url_for('index') }}" class="text-blue-500 hover:underline">‚Üê Back to Home</a>
        <a href="{{ url_for('logout') }}" class="text-blue-500 hover:underline">üö™ Logout</a>
      </div>
    </div>

    <!-- ‚úÖ Total Workouts Counter (matches Strength) -->
    <p class="text-center text-gray-600 mb-6">
      Total Workouts Logged: <strong>{{ cardio_count }}</strong>
    </p>

    <!-- ‚úÖ Cardio Form -->
    <form method="POST" action="/cardio" class="mb-8 max-w-md mx-auto space-y-4">
      <input type="text" name="activity" placeholder="Activity (e.g. Running)" class="w-full border border-gray-300 rounded px-4 py-2" required>
      <input type="number" name="duration" placeholder="Duration (minutes)" step="0.1" class="w-full border border-gray-300 rounded px-4 py-2" required>
      <input type="number" name="distance" placeholder="Distance (optional)" step="0.1" class="w-full border border-gray-300 rounded px-4 py-2">
      <!-- üîÅ Renamed to match Strength -->
      <button type="submit" class="bg-black text-white w-full py-2 rounded hover:bg-gray-800">Submit Progress</button>
    </form>
<!-- ‚úÖ Activity Filter (matches Strength style) -->
<form method="GET" action="/cardio" class="mb-8 text-center">
  <label for="activity" class="mr-2 text-sm font-medium">Filter by activity:</label>
  <select name="activity" id="activity"
          class="px-3 py-2 border border-gray-300 rounded text-sm">
    <option value="">-- Show All --</option>
    {% for activity in all_activities %}
      <option value="{{ activity }}" {% if activity == selected_activity %}selected{% endif %}>{{ activity }}</option>
    {% endfor %}
  </select>
  <button type="submit" class="ml-2 px-3 py-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">Filter</button>
  {% if selected_activity %}
    <a href="/cardio" class="text-blue-500 text-sm underline ml-4">Clear Filter</a>
  {% endif %}
</form>

    <!-- ‚úÖ Personal Records Section -->
    <h2 class="text-xl font-semibold mb-2 text-center">Personal Records</h2>
    {% if pr_duration_dict %}
    <ul class="text-center mb-10">
      {% for activity, duration in pr_duration_dict.items() %}
        <li class="text-gray-700"><strong>{{ activity }}:</strong> {{ duration }} min</li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="text-center text-gray-500 mb-10">No cardio records yet.</p>
    {% endif %}

    <!-- ‚úÖ Progress Over Time Chart -->
    <h2 class="text-xl font-semibold mb-4 text-center">Progress Over Time</h2>
    <div class="mb-10" style="max-width:600px;margin:auto;">
      <canvas id="cardioChart"></canvas>
    </div>

    <!-- ‚úÖ Cardio Table -->
    <div class="overflow-x-auto">
      <table class="table-auto w-full border">
        <thead class="bg-blue-100 text-blue-700">
          <tr>
            <th>Date</th>
            <th>Activity</th>
            <th>Duration</th>
            <th>Distance</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for entry in cardio_data %}
          <tr>
            <td>{{ entry.date }}</td>
            <td>{{ entry.activity }}</td>
            <td>{{ entry.duration }}</td>
            <td>{{ entry.distance if entry.distance else '-' }}</td>
            <td>
              <div class="flex space-x-2">
                <a href="{{ url_for('edit_cardio', entry_id=entry.id) }}" class="text-blue-500 hover:text-blue-700">‚úèÔ∏è</a>
                <form method="POST" action="{{ url_for('delete_cardio', entry_id=entry.id) }}" style="display:inline;" onsubmit="return confirm('Delete this entry?')">
                  <button type="submit" class="text-red-500 hover:text-red-700">üóë</button>
                </form>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>

  <!-- ‚úÖ Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const labels = [{% for e in cardio_data %}'{{ e.date }}',{% endfor %}];
    const durations = [{% for e in cardio_data %}{{ e.duration }},{% endfor %}];
    if(labels.length){
      new Chart(document.getElementById('cardioChart'), {
        type:'line',
        data:{labels:labels, datasets:[{label:'Duration (min)', data:durations, borderColor:'red', backgroundColor:'rgba(255,0,0,0.2)', fill:true}]}
      });
    }
  </script>
</body>
</html>





